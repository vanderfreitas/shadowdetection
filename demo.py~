import cv2
import numpy as np
from matplotlib import pyplot as plt

from os import listdir
from os.path import isfile, join

#from shdwDetection_usandoKH import *
from shdwDetection import *

# Imagens originais
#oriDirectory = 'ori/'
oriDirectory = 'testeEscuras/'
oriImages = [f for f in listdir(oriDirectory) if isfile(join(oriDirectory, f))]


#detecDirectory = 'detected/'
detecDirectory = 'testeEscuras/'

# Ordenando a lista para ter correspondencia de indice
oriImages.sort()

print "### Diretorios ###"
print oriImages
print detecDirectory

print "NUM IMAGENS: ", len(oriImages)


for i in xrange(len(oriImages)):

	imgNome = oriImages[i]
	detectedNome = detecDirectory + imgNome + '.png'

	print imgNome

	# Carregando a imagem
	imgRef = cv2.imread(oriDirectory + imgNome)

	# Calculando as sombras
	imgOut = shadowDetection_Santos_KH(imgRef)

	# salva img em disco
	cv2.imwrite(detectedNome,imgOut)
